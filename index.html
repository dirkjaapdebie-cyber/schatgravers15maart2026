<!DOCTYPE html>
<html lang="nl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Schatgravers - Olijfberg</title>
    <link href="https://fonts.googleapis.com/css2?family=Fredoka:wght@400;600&display=swap" rel="stylesheet">
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-database-compat.js"></script>
    <style>
        :root { --main-blue: #1e3799; --gold: #f6b93b; --grass: #7ca35f; }
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Fredoka', sans-serif; }
        body { background: #0a3d62; color: #333; overflow-x: hidden; }
        #app { width: 100%; max-width: 500px; margin: 0 auto; padding: 10px; }
        
        .screen { display: none; background: white; border-radius: 25px; padding: 20px; min-height: 85vh; box-shadow: 0 10px 30px rgba(0,0,0,0.5); flex-direction: column; }
        .screen.active { display: flex; animation: fadeIn 0.3s; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

        /* Navigatie */
        #nav-bar { display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px; background: var(--main-blue); padding: 12px; border-radius: 15px; color: white; }
        .nav-btn { background: var(--gold); border: none; padding: 10px 15px; border-radius: 10px; font-weight: bold; cursor: pointer; }

        /* Scherm 3: Scrollbaar Verhaal */
        .story-container { flex-grow: 1; overflow-y: auto; background: #fdf6e3; padding: 20px; border-radius: 15px; border-left: 5px solid var(--gold); max-height: 60vh; line-height: 1.6; }

        /* Scherm 4: Rad & Stellingen */
        .wheel-box { position: relative; width: 200px; height: 200px; margin: 10px auto; border: 5px solid #333; border-radius: 50%; overflow: hidden; transition: transform 3s cubic-bezier(0.17, 0.67, 0.12, 0.99); }
        .wheel-segment { position: absolute; width: 50%; height: 50%; transform-origin: 100% 100%; }
        .stelling-card { display: none; background: #f1f2f6; padding: 15px; border-radius: 15px; margin-top: 15px; border: 2px solid var(--main-blue); }
        .live-answers { background: white; margin-top: 10px; padding: 10px; border-radius: 10px; max-height: 120px; overflow-y: auto; font-size: 0.9rem; }

        /* Scherm 5: Woordveld */
        .word-grid { display: grid; grid-template-columns: repeat(10, 1fr); gap: 2px; background: #ccc; padding: 5px; border-radius: 10px; }
        .cell { background: white; aspect-ratio: 1; display: flex; align-items: center; justify-content: center; font-weight: bold; font-size: 0.8rem; cursor: pointer; }
        .cell.selected { background: var(--gold); color: white; }

        /* Scherm 6: Doolhof Getsemane */
        #maze-container { position: relative; width: 300px; height: 300px; background: var(--grass); margin: 0 auto; border: 5px solid #5d4037; overflow: hidden; }
        .wall { position: absolute; background: #2d5a27; border-radius: 2px; }
        .player { position: absolute; width: 16px; height: 16px; background: #3498db; border-radius: 50%; z-index: 10; border: 2px solid white; }
        .jesus { position: absolute; width: 20px; height: 20px; background: #f1c40f; border-radius: 50%; display: flex; align-items: center; justify-content: center; box-shadow: 0 0 10px gold; }

        .btn { background: var(--main-blue); color: white; width: 100%; padding: 15px; border: none; border-radius: 15px; font-weight: bold; cursor: pointer; margin: 10px 0; }
        input, textarea { width: 100%; padding: 12px; border: 2px solid #ddd; border-radius: 10px; margin: 5px 0; }
    </style>
</head>
<body>

<div id="app">
    <div id="nav-bar">
        <span id="screen-title">Schatgravers</span>
        <button class="nav-btn" onclick="nextScreen()">VOLGENDE</button>
    </div>

    <div id="screen0" class="screen active">
        <h2>üîë Toegang</h2>
        <input type="text" id="username" placeholder="Typ je naam...">
        <button class="btn" onclick="login()">START</button>
    </div>

    <div id="screen1" class="screen">
        <h2>üìç De Olijfberg</h2>
        <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3391.876356475514!2d35.2428612!3d31.7780515!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x150329c369e710d3%3A0xc62220f8c057692!2sMount%20of%20Olives!5e1!3m2!1snl!2snl!4v1700000000000" width="100%" height="300" style="border:0; border-radius:15px;" allowfullscreen></iframe>
        <p style="margin-top:10px;">Vanaf hier keek Jezus uit over de stad Jeruzalem.</p>
    </div>

    <div id="screen2" class="screen">
        <h2>üìñ Het Verhaal</h2>
        <div class="story-container">
            <h3>Jezus bidt op de Olijfberg</h3>
            <p>Jezus ging de stad uit. Hij ging naar de Olijfberg, zoals altijd. De leerlingen gingen met hem mee. Toen ze op de berg waren, zei Jezus: ‚ÄòBid God om kracht, zodat je geen verkeerde keuze maakt.‚Äô</p>
            <p>Daarna liep hij zelf een stukje verder. Hij knielde en begon te bidden: ‚ÄòVader, als u het wilt, houd dan dit zware lijden bij mij weg! Maar doe wat u zelf wilt, niet wat ik wil.‚Äô</p>
            <p>Toen kwam er een engel uit de hemel om Jezus kracht te geven. Jezus was bang en ging steeds harder bidden. Zijn zweet viel in grote druppels op de grond. Het leken wel druppels bloed.</p>
            <p>Toen Jezus klaar was met bidden, stond Hij op en ging naar zijn leerlingen. Die waren van verdriet in slaap gevallen.</p>
            <hr style="margin:15px 0;">
            <h3>Judas verraadt Jezus</h3>
            <p>Terwijl Jezus dat zei, kwam er een groep mannen aan. Judas liep voorop. Hij gaf Jezus een kus. Maar Jezus zei: ‚ÄòJudas, verraad je de Mensenzoon met een kus?‚Äô</p>
            <p>Een van de leerlingen pakte zijn zwaard en sloeg het rechteroor van de knecht van de hogepriester eraf. Maar Jezus zei: ‚ÄòStop, genoeg!‚Äô Hij maakte de man weer beter.</p>
            <p>Jezus zei tegen de priesters: ‚ÄòJullie komen met zwaarden alsof ik een misdadiger ben. Elke dag was ik in de tempel. Nu laat de duisternis haar macht zien.‚Äô</p>
        </div>
    </div>

    <div id="screen3" class="screen">
        <h2>üé° Het Rad</h2>
        <div id="wheel" class="wheel-box">
            </div>
        <button class="btn" style="background:var(--gold); color:black;" onclick="spin()">DRAAI HET RAD</button>
        <div id="active-stelling-box" class="stelling-card">
            <h4 id="stelling-titel"></h4>
            <p id="stelling-tekst"></p>
            <textarea id="my-answer" placeholder="Wat vind jij?"></textarea>
            <button class="btn" onclick="sendAnswer()">STUUR ANTWOORD</button>
            <div class="live-answers" id="live-feed"></div>
        </div>
    </div>

    <div id="screen4" class="screen">
        <h2>üîç Woordzoeker</h2>
        <p style="font-size:0.7rem; margin-bottom:5px;">Zoek: GETSEMANE, OLIJFBERG, JEZUS, NARCISSEN, OPBLOEIEN, PASEN, VERRAAD</p>
        <div class="word-grid" id="word-grid"></div>
    </div>

    <div id="screen5" class="screen">
        <h2>üèÉ Ontsnap uit de Hof</h2>
        <div id="maze-container">
            <div id="maze-walls"></div>
            <div id="player" class="player"></div>
            <div id="jesus" class="jesus">üôè</div>
        </div>
        <div style="display:grid; grid-template-columns:repeat(3,1fr); gap:10px; margin-top:15px; width:150px; align-self:center;">
            <div></div><button class="nav-btn" onclick="move(0,-1)">‚Üë</button><div></div>
            <button class="nav-btn" onclick="move(-1,0)">‚Üê</button><button class="nav-btn" onclick="move(0,1)">‚Üì</button><button class="nav-btn" onclick="move(1,0)">‚Üí</button>
        </div>
    </div>
</div>

<script>
    // --- CONFIG & FIREBASE ---
    const firebaseConfig = {
        apiKey: "AIzaSyBC3Dzm8PNPXw12VJNimvly5u2I93QeW54",
        databaseURL: "https://schatgravers15maart2026-default-rtdb.europe-west1.firebasedatabase.app",
        projectId: "schatgravers15maart2026",
    };
    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();

    let curScr = 0;
    let myName = "";
    let curStelling = 0;

    const stellingen = [
        "Ik ben weleens bang voor wat er gaat komen.",
        "Als ik het moeilijk heb, bid ik om kracht.",
        "Ik probeer anderen te helpen die verdrietig zijn.",
        "Soms is het moeilijk om te doen wat God wil.",
        "Ik vind het dapper dat Jezus niet wegrende.",
        "Vriendschap is belangrijker dan winnen."
    ];

    // --- NAVIGATIE ---
    function nextScreen() {
        document.getElementById(`screen${curScr}`).classList.remove('active');
        curScr = (curScr + 1) % 6;
        document.getElementById(`screen${curScr}`).classList.add('active');
        if(curScr === 3) buildWheel();
        if(curScr === 4) buildWordSearch();
        if(curScr === 5) initMaze();
    }

    function login() {
        myName = document.getElementById('username').value;
        if(myName) nextScreen();
    }

    // --- RAD & FEED ---
    function buildWheel() {
        const w = document.getElementById('wheel');
        w.innerHTML = '';
        const colors = ['#e55039', '#4a69bd', '#60a3bc', '#38ada9', '#f6b93b', '#b71540'];
        for(let i=0; i<6; i++) {
            const s = document.createElement('div');
            s.className = 'wheel-segment';
            s.style.backgroundColor = colors[i];
            s.style.transform = `rotate(${i*60}deg) skewY(30deg)`;
            w.appendChild(s);
        }
    }

    function spin() {
        const deg = Math.floor(Math.random() * 360) + 1440;
        document.getElementById('wheel').style.transform = `rotate(${deg}deg)`;
        setTimeout(() => {
            curStelling = Math.floor(((deg % 360)) / 60);
            showStelling(curStelling);
        }, 3100);
    }

    function showStelling(id) {
        document.getElementById('active-stelling-box').style.display = 'block';
        document.getElementById('stelling-titel').innerText = `Stelling ${id+1}`;
        document.getElementById('stelling-tekst').innerText = stellingen[id];
        loadFeed(id);
    }

    function sendAnswer() {
        const text = document.getElementById('my-answer').value;
        if(text) {
            db.ref(`live/${curStelling}`).push({naam: myName, tekst: text});
            document.getElementById('my-answer').value = '';
        }
    }

    function loadFeed(id) {
        db.ref(`live/${id}`).on('value', snap => {
            const feed = document.getElementById('live-feed');
            feed.innerHTML = '<b>Wat anderen zeggen:</b><br>';
            snap.forEach(child => {
                const v = child.val();
                feed.innerHTML += `<div><b>${v.naam}:</b> ${v.tekst}</div>`;
            });
        });
    }

    // --- WOORDZOEKER ---
    function buildWordSearch() {
        const grid = document.getElementById('word-grid');
        grid.innerHTML = '';
        const words = ["GETSEMANE", "OLIJFBERG", "JEZUS", "NARCISSEN", "OPBLOEIEN", "PASEN", "VERRAAD"];
        const chars = "ABCDEFGHIJKLMNOPQRSTUVWXYZ";
        for(let i=0; i<100; i++) {
            const c = document.createElement('div');
            c.className = 'cell';
            c.innerText = chars[Math.floor(Math.random()*26)];
            c.onclick = () => c.classList.toggle('selected');
            grid.appendChild(c);
        }
        // Simpele plaatsing van 1 woord als voorbeeld (statisch)
        const cells = document.querySelectorAll('.cell');
        "GETSEMANE".split('').forEach((l, i) => cells[i].innerText = l);
    }

    // --- DOOLHOF ---
    const layout = [
        [1,1,1,1,1,1,1,1,1,1],[1,0,0,0,1,0,0,0,0,1],[1,0,1,0,1,0,1,1,0,1],[1,0,1,0,0,0,1,0,0,1],[1,0,1,1,1,0,1,1,0,1],[1,0,0,0,1,0,0,0,0,1],[1,1,1,0,1,1,1,1,0,1],[1,0,0,0,0,0,0,1,0,1],[1,0,1,1,1,1,0,0,0,1],[1,1,1,1,1,1,1,1,1,1]
    ];
    let pPos = {x:1, y:1};

    function initMaze() {
        const container = document.getElementById('maze-walls');
        container.innerHTML = '';
        layout.forEach((row, y) => {
            row.forEach((v, x) => {
                if(v === 1) {
                    const w = document.createElement('div');
                    w.className = 'wall';
                    w.style.left = x*30+'px'; w.style.top = y*30+'px';
                    w.style.width = '30px'; w.style.height = '30px';
                    container.appendChild(w);
                }
            });
        });
        updatePlayer();
        const j = document.getElementById('jesus');
        j.style.left = '240px'; j.style.top = '240px';
    }

    function move(dx, dy) {
        if(layout[pPos.y+dy][pPos.x+dx] === 0) {
            pPos.x += dx; pPos.y += dy;
            updatePlayer();
        }
        if(pPos.x === 8 && pPos.y === 8) alert("Gevonden!");
    }

    function updatePlayer() {
        const p = document.getElementById('player');
        p.style.left = pPos.x*30+7+'px'; p.style.top = pPos.y*30+7+'px';
    }
</script>
</body>
</html>
