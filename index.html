<!DOCTYPE html>
<html lang="nl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Schatgravers - Het Verhaal</title>
    <link href="https://fonts.googleapis.com/css2?family=Fredoka:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        /* Basisstijl */
        * { margin: 0; padding: 0; box-sizing: border-box; touch-action: manipulation; }
        body { font-family: 'Fredoka', sans-serif; background: #0a3d62; color: #333; }
        
        #app { width: 100%; max-width: 500px; margin: 0 auto; padding: 10px; }
        .screen { display: none; background: white; border-radius: 25px; padding: 20px; min-height: 85vh; box-shadow: 0 10px 30px rgba(0,0,0,0.5); flex-direction: column; }
        .screen.active { display: flex; animation: fadeIn 0.3s; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

        /* Navigatie */
        #nav-bar { display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px; background: #1e3799; padding: 12px; border-radius: 15px; color: white; }
        .nav-btn { background: #f6b93b; border: none; padding: 10px 20px; border-radius: 10px; font-weight: bold; cursor: pointer; color: #0a3d62; }

        /* Scherm 3: Scrollbaar Bijbelverhaal */
        .story-container { 
            flex-grow: 1;
            overflow-y: auto; 
            background: #fdf6e3; 
            padding: 20px; 
            border-radius: 15px; 
            border-left: 5px solid #f6b93b;
            margin: 10px 0;
            box-shadow: inset 0 0 10px rgba(0,0,0,0.1);
            max-height: 60vh; /* Zorgt voor scrollen op kleine schermen */
        }
        .story-text h3 { color: #1e3799; margin-bottom: 10px; }
        .story-text p { line-height: 1.6; margin-bottom: 15px; font-size: 1.05rem; }
        .bible-ref { font-style: italic; color: #666; font-size: 0.9rem; }

        /* Woordzoeker */
        .grid-container { display: grid; grid-template-columns: repeat(10, 1fr); gap: 2px; background: #ddd; padding: 5px; border-radius: 10px; margin-top: 10px; }
        .cell { background: white; aspect-ratio: 1; display: flex; align-items: center; justify-content: center; font-weight: bold; font-size: 14px; border-radius: 3px; }
        .cell.selected { background: #f6b93b; color: white; }
        
        /* Doolhof */
        #maze-board { position: relative; width: 300px; height: 300px; background: #2d5a27; border: 4px solid #8B4513; margin: 0 auto; border-radius: 10px; overflow: hidden; }
        #player { position: absolute; width: 20px; height: 20px; background: #3498db; border-radius: 50%; border: 2px solid white; z-index: 10; transition: 0.1s; }
        #jesus { position: absolute; width: 25px; height: 25px; background: #f1c40f; border-radius: 50%; box-shadow: 0 0 15px gold; z-index: 5; }
        .guard { position: absolute; width: 20px; height: 20px; background: #e74c3c; border-radius: 4px; z-index: 8; transition: 0.6s linear; }
        .controls { display: grid; grid-template-columns: repeat(3, 1fr); width: 160px; margin: 15px auto; gap: 10px; }
        .ctrl-btn { background: #1e3799; color: white; border: none; padding: 15px; border-radius: 12px; font-size: 1.3rem; box-shadow: 0 4px #0a266e; }
        .ctrl-btn:active { box-shadow: 0 0; transform: translateY(4px); }

        .btn { background: #1e3799; color: white; width: 100%; padding: 15px; border: none; border-radius: 15px; font-weight: bold; font-size: 1.1rem; cursor: pointer; }
    </style>
</head>
<body>

<div id="app">
    <div id="nav-bar">
        <span id="screen-title">Welkom</span>
        <button class="nav-btn" onclick="nextScreen()">Volgende ➔</button>
    </div>

    <div id="screen0" class="screen active">
        <h2>Schatgravers Online</h2>
        <p style="margin: 15px 0;">Vul je naam in om te beginnen:</p>
        <input type="text" id="pname" placeholder="Naam..." style="width:100%; padding:15px; border-radius:10px; border:2px solid #ddd; font-family: inherit;">
        <button class="btn" style="margin-top:20px;" onclick="nextScreen()">START HET AVONTUUR</button>
    </div>

    <div id="screen1" class="screen">
        <h2>De Olijfberg</h2>
        <div style="width:100%; height:350px; border-radius:15px; overflow:hidden; border:3px solid #ddd;">
            <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3392.541334947938!2d35.24294117625147!3d31.777444125171783!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x150329eb006f654b%3A0x6a3838634e73f8b0!2sMount%20of%20Olives!5e1!3m2!1snl!2snl!4v1700000000000!5m2!1snl!2snl" width="100%" height="100%" style="border:0;" allowfullscreen="" loading="lazy"></iframe>
        </div>
        <p style="margin-top:10px;">Dit is de berg waar het verhaal zich afspeelt. Gebruik je vingers om de kaart te bewegen!</p>
    </div>

    <div id="screen2" class="screen">
        <h2>Het Verhaal</h2>
        <div class="story-container">
            <div class="story-text">
                <h3>Jezus bidt op de Olijfberg</h3>
                <p>Jezus ging de stad uit. Hij ging naar de Olijfberg, zoals altijd. De leerlingen gingen met hem mee. Toen ze op de berg waren, zei Jezus: ‘Bid God om kracht, zodat je geen verkeerde keuze maakt.’</p>
                <p>Daarna liep hij zelf een stukje verder. Hij knielde en begon te bidden: ‘Vader, als u het wilt, houd dan dit zware lijden bij mij weg! Maar doe wat u zelf wilt, niet wat ik wil.’</p>
                <p>Toen kwam er een engel uit de hemel om Jezus kracht te geven. Jezus was bang en ging steeds harder bidden. Zijn zweet viel in grote druppels op de grond. Het leken wel druppels bloed.</p>
                <p>Toen Jezus klaar was met bidden, stond Hij op en ging naar zijn leerlingen. Die waren van verdriet in slaap gevallen. Jezus zei: ‘Waarom slapen jullie? Bid God om kracht, zodat je geen verkeerde keuze maakt.’</p>
                <hr style="margin: 20px 0; border: 0; border-top: 1px dashed #ccc;">
                <h3>Judas verraadt Jezus</h3>
                <p>Terwijl Jezus dat zei, kwam er een groep mannen aan. Judas, één van de twaalf leerlingen, liep voorop. Hij ging naar Jezus toe en groette hem met een kus. Maar Jezus zei: ‘Judas, verraad je de Mensenzoon met een kus?’</p>
                <p>Toen de leerlingen begrepen wat er ging gebeuren, vroegen ze: ‘Heer, zullen we onze zwaarden pakken?’ En één van de leerlingen pakte zijn zwaard en sloeg de knecht van de hogepriester. Hij sloeg zijn rechteroor eraf. Maar Jezus zei: ‘Stop, genoeg!’ En hij pakte het oor en maakte de man weer beter.</p>
                <p>Er waren priesters, officieren van de tempel en leiders van het volk meegekomen om Jezus gevangen te nemen. Jezus zei tegen hen: ‘Jullie zijn hier gekomen met zwaarden en stokken. Alsof ik een gevaarlijke misdadiger ben! Elke dag was ik bij jullie in de tempel, maar toen namen jullie mij niet gevangen. Nu is het moment gekomen waarop jullie gewacht hebben. Nu laat de duisternis haar macht zien.’</p>
                <p class="bible-ref">(Gebaseerd op Lucas 22)</p>
            </div>
        </div>
    </div>

    <div id="screen3" class="screen">
        <h2>Woordzoeker</h2>
        <p style="font-size:0.8rem;">Zoek: PESACH, VERDRIET, OLIJFBERG, GETSEMANE, JERUZALEM, LIJDEN, DISCIPEL</p>
        <div id="word-grid" class="grid-container"></div>
    </div>

    <div id="screen4" class="screen">
        <h2>Ontwijk de wachters!</h2>
        <div id="maze-board">
            <div id="player"></div>
            <div id="jesus"></div>
        </div>
        <div class="controls">
            <div></div><button class="ctrl-btn" onclick="move(0,-1)">↑</button><div></div>
            <button class="ctrl-btn" onclick="move(-1,0)">←</button>
            <button class="ctrl-btn" onclick="move(0,1)">↓</button>
            <button class="ctrl-btn" onclick="move(1,0)">→</button>
        </div>
    </div>
</div>

<script>
    let cur = 0;
    const total = 5;

    function nextScreen() {
        document.getElementById(`screen${cur}`).classList.remove('active');
        cur = (cur + 1) % total;
        document.getElementById(`screen${cur}`).classList.add('active');
        document.getElementById('screen-title').innerText = "Stap " + (cur + 1);
        
        if(cur === 3) initWordsearch();
        if(cur === 4) initMaze();
    }

    // --- Woordzoeker ---
    function initWordsearch() {
        const grid = document.getElementById('word-grid');
        grid.innerHTML = '';
        const letters = "GETSEMANEVPESACHXXXOLIJFBERGPVERDRIETXJERUZALEMLIJDENXXXXDISCIPELXX".padEnd(100, "X").split("");
        letters.forEach(l => {
            const d = document.createElement('div');
            d.className = 'cell';
            d.innerText = l === "X" ? String.fromCharCode(65 + Math.random()*26) : l;
            d.onclick = () => d.classList.toggle('selected');
            grid.appendChild(d);
        });
    }

    // --- Doolhof ---
    let pPos = { x: 10, y: 10 };
    let guards = [];

    function initMaze() {
        const board = document.getElementById('maze-board');
        pPos = { x: 10, y: 10 };
        updatePlayer();
        document.getElementById('jesus').style.left = '260px';
        document.getElementById('jesus').style.top = '260px';

        if(guards.length === 0) {
            for(let i=0; i<3; i++) {
                const g = document.createElement('div');
                g.className = 'guard';
                board.appendChild(g);
                guards.push({ el: g, x: Math.random()*250, y: Math.random()*250 });
            }
            setInterval(() => {
                guards.forEach(g => {
                    g.x = Math.random()*270; g.y = Math.random()*270;
                    g.el.style.left = g.x+'px'; g.el.style.top = g.y+'px';
                    checkCollision(g);
                });
            }, 1500);
        }
    }

    function move(dx, dy) {
        pPos.x = Math.max(0, Math.min(280, pPos.x + dx*20));
        pPos.y = Math.max(0, Math.min(280, pPos.y + dy*20));
        updatePlayer();
        if(pPos.x >= 250 && pPos.y >= 250) alert("Je hebt Jezus gevonden!");
    }

    function updatePlayer() {
        const p = document.getElementById('player');
        p.style.left = pPos.x + 'px'; p.style.top = pPos.y + 'px';
    }

    function checkCollision(g) {
        const dist = Math.sqrt(Math.pow(pPos.x - g.x, 2) + Math.pow(pPos.y - g.y, 2));
        if(dist < 20) {
            pPos = { x: 10, y: 10 };
            updatePlayer();
        }
    }
</script>

</body>
</html>
